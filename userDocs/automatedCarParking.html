<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
	font-size: 93%;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
	border-radius: 10px;
	padding: 5px;
}

top {
	width: 100%;
}


#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 90%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #abe876;
    color: #1632cc;
}
bc{
	font-family: "Arial";
	font-size: 90%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	font-size: 90%;
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	font-size: 90%;
}
pre{
	font-family: "Consolas";
	font-size: 85%;
	background-color: #f5f5f5;
	border: 1.5px solid silver;
	padding: 5px;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	 
    font-size: 18px;
}
k{
    color: #990000;
	font-weight: bold;
	font-size: 90%;
}
h1 {
    font-size: 150%;
    background-color: #b2c0ff;
	padding: 10px;
}

h2 {
    background-color: #9ed8ff;
    font-size: 130%;
}

h3 {
	background-color: #e6ccff;
    font-size: 100%;
}
h4 {
    background-color: #ccffcc;
    font-size: 100%;
	width: 95%;
	border-radius: 5px;
	padding: 2px;
}
h5 {
    background-color: #d5ffb0;
    font-size: 100%;

}
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}
div.remark{
	background-color: #E3F2FD;
    border: 1.5px solid #d5f2ed;
    padding: 15px;
    margin: 10px;
	border-radius: 25px;
}

div.containercolumn{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-content: center;
    align-items: center;
}

table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  vertical-align: top;
}

ol, ul, li {
  margin: 0;
  margin-left: 15px;
  padding: 0;
  padding-bottom: 5px;
}

table, th, td {
	border: 1px solid black;
}

img {
	border: 1.5px solid #d5f2ed

}

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

div.wrapdesc{
	width: 90%;
	margin: auto;
}

div.imagedesc{
	width: 85%;
	margin: auto;
}
</style>
    
<head>
   
<title>Automated Car Parking - Alessandro Foglia</title></head>
    
<body>
<div id="top">
<h1>LABORATORIO DI INGEGNERIA DEI SISTEMI SOFTWARE <font size="5"></font> </h1>
</div>  

<div class="body"> 
<h2>Introduction</h2>
 
 
<h2>Requirements</h2>

 
<div class="remark">
    <a href=https://github.com/anatali/issLab2021/blob/main/it.unibo.issLabStart/userDocs/TFBO21ParkingISS.pdf>
        Text given by the customer (TFBO21ParkingISS.pdf)
    </a>
</div>

<h2>Requirement analysis</h2>
    <div class="remark">
        <h3>Meaning of nonus and verbs</h3>
        <kc>Nonus</kc>
        <ul>
            <li><ks>DDR Robot</ks>: (Differential Drive Robot) it is able to explore in a systematic and autonomous way the environment by executing simple move commands and showing in real time to the user his position in the environment.
            It can be equipped with multiple devices and senors and it can be capable of moving object as a transport trolley with a squared form of fixed side length;</li>
            <li><ks>Environment</ks>: represent the area where DDR robot can moves;</li>
            <li><ks>Home location</ks>: fixed starting position inside the parking-area where the robot will be located at the system startup and where it come back if there aren't pending jobs;</li>
            <li><ks>Parking-area</ks>: empty room that must include an indoor, outdoor, indoor-area, outdoor-area, parking-slots, thermometer sensor and a fan sensor;</li>
            <li><ks>Indoor</ks>: used to get the car that must be parked into the parking-area;</li>
            <li><ks>Outdoor</ks>: used to exit the car from the parking-area;</li>
            <li><ks>Indoor-area</ks>: faces the indoor and hosts the car that needs to be parked. In this area there is a weightsensor;</li>
            <li><ks>Weightsensor</ks>: sensor that measures the weight of the car inside the indoor-area;</li>
            <li><ks>Outdoor-area</ks>: faces the outdoor and hosts the car to be picked up. In this area there is a outsonar. Once the area is engaged by a car it should be freed in a pre-fixed interval time;</li>
            <li><ks>Outsonar</ks>: it is a sonar sensor that detects the presence of a car in a certain space (outdoor-area);</li>
            <li><ks>Parking-slot</ks>: area used to parking the car. The area covered by the parking-slots cannot be crossed by the robot also if the parking-slot is free;</li>
            <li><ks>Thermometer</ks>: sensor used to measures the temperature inside the parking-area;</li>
            <li><ks>Fan</ks>: device used to lower the temperature inside the parking-area;</li>
            <li><ks>Map</ks>: it is a representation of the parking-area. The parking-area is represented by a grid of squares of fixed size length where each sqaure includes the parking-slot. Parking-slots positions are marked with a red X and fixed obstacles in the parking-area are marked with black X;</li>
            <li><ks>Fixed obstacle</ks>: non-moving object inside the parking area that the robot cannot corss;</li>
            <li><ks>Wall</ks>: fixed obstacle that delimits the parking-area;</li>
            <li><ks>ParkingServiceGUI</ks>: a user interface interacting component that allow the client to manifest the interest of entering the car into the parking-area and receiving the state about parking-slots (free slots). It also allow client to call robot to park the car;</li>
            <li><ks>ParkServiceStatusGUI</ks>: a user interface interacting component that allows the parking-manager to observe the status of the parking-area including temperature, fan status (on or off) and robot;</li>
            <li><ks>Status</ks>: information about the state of the robot, the fan, the temperature of the parking-area, the car waiting for entering/exiting the parking-area and if the parking-solots are free or occupied;</li>
            <li><ks>Token</ks>: a unique identifier of the couple car - parking-slot, inside the parking-area, given to the client to exit car from parking-area;</li>
            <li><ks>Client</ks>: physical person that posses the car;</li>
            <li><ks>TMAX</ks>: fixed max temperature above which the fan must be activated;</li>
        </ul>
        <kc>Verbs</kc>
        <ul>
            <li><ks>Stop the robot</ks>: stops the robot in the current position it is. This operation is always up by the parking-manager</li>
            <li><ks>Start the robot</ks>: starts the robot from the current position it is. This operation is always up by the parking-manager</li>
            <li><ks>Stop the fan</ks>: stops the fan from working status. This operation is always up by the parking-manager or it can be automated by checking the value of thermometer inside the parking-area;</li>
            <li><ks>Start the fan</ks>: starts the fan from off status. This operation is always up by the parking-manager or it can be automated by checking the value of thermometer inside the parking-area;</li>
            <li><ks>Pick-up car</ks>: the client who parked the car must be able of collecting it from the outdoor-areaby entering the token related to his/her car</li>
            <li><ks>Enter car</ks>: the clients must be able to enter with the car inside the indoor-area and receive the number of free parking-slots. If there is at least one slot available (free), client receive the unique token;</li>
            <li><ks>Check status</ks>: parking-manager must able to check the status of the entire system;</li>
            <li><ks>Inform the client</ks>: send and show a message to the client;</li>
            <li><ks>Automated start & stop of the fan</ks>: the manager can set the automated or manual mode to start and stop the fan inside the parking-area</li>
        </ul>
    </div>
    <div class="remark">
        <h3>Requirements overview - Parking Map</h3>
        First we want to introduce a new representation of a file given by the customer representing the parking area as a <em>map</em>: <a target="_blank" href="https://github.com/anatali/issLab2021/blob/main/it.unibo.issLabStart/userDocs/parkingMap.txt">parkingMap.txt</a>
        <table style="margin-top: 1rem;">
            <tbody>
                <td>
                    <div style="display: flex; flex-direction: column; align-items: center">
                        <img src="./img/ParkingMapCustomer.jpg" style="margin: 1rem;">
                        <span>Map given by the customer</span>
                    </div>
                </td>
                <td>
                    <div style="display: flex; flex-direction: column; align-items: center">
                        <img src="./img/ParkingMapRefactor.jpg" style="margin: 1rem;">
                        <i>Map refactoring</i>
                    </div>
                </td>
            </tbody>
        </table>
        <div style="margin-top: 1rem;">
            Map specifications given by the customer:
            <ul>
                <li><strong>r</strong>: current cell occupied by the robot</li>
                <li><strong>0</strong>: free cell where robot can pass over it</li>
                <li><strong style="color: #CC0000">X</strong>: cell representing a parking slot</li>
                <li><strong>X</strong>: cell representing a fixed obstacle</li>
                <li><strong style="background-color: #FFF2CC;">&nbsp;&nbsp;&nbsp;&nbsp;</strong>: cell representing the robot home</li>
            </ul>
        </div>
        <div style="margin-top: 1rem;">
            <h3>Requirements overview - Entities</h3>
            Devices and reserved areas of the parking room specified by the customer:
            <table style="margin-top: 1rem;">
                <tbody>
                    <td>
                        <div style="display: flex; flex-direction: column; align-items: center">
                            <img src="./img/ParkingMapDevices.jpg" style="margin: 1rem;">
                            <span>Reserved areas by devices and parkign slots</span>
                        </div>
                    </td>
                </tbody>
            </table>
            <div style="margin-top: 1rem;">
                Map specifications given by the customer:
                <ul>
                    <li><strong>Home</strong>: in the cell (0, 0)</li>
                    <li><strong>Parking area</strong>: in the cells (2, 1), (3, 1), (2, 2), (3, 2), (2, 3), (3, 3)</li>
                    <li><strong>Indoor area</strong>: in the cell (6, 0)</li>
                    <li><strong>Outdoor area</strong>: in the cell (6, 4)</li>
                </ul>
                The docuemt given by the customer specify that the robot cannot wal over the parking area.<br/>
                A support can be given by the utility <a target="_blank" href="https://github.com/anatali/issLab2021/blob/main/it.unibo.kotlinSupports/app/src/main/kotlin/mapRoomKotlin/mapUtil.kt"><em>mapUtil.kt</em></a> produced by the customer. It creats a room map as a singleton, there are methods like <bc>doMove(move : String)</bc>, <bc>getMapAndClean()</bc> and <bc>showMap()</bc> to work with map.
            </div>
            <div style="margin-top: 1rem;">
                Devices specifications given by the customer:
                <ul>
                    <li><strong>Trolley</strong>: it is a DDR Robot and the customer also includes the software <a target="_blank" href="https://github.com/anatali/issLab2021/tree/main/it.unibo.qak21.basicrobot"><em>it.unibo.qak21.basicrobot</em></a></li>
                    <li><strong>Fan</strong>: There is a software given by the customer that turn on or turn off a led connected to Raspberry. Since we haven't a Raspberry we have to adapt the code to a virtual device.</li>
                    <li><strong>Thermometer</strong>: There is no software to given by the customer. Self managed.</li>
                    <li><strong>Weightsensor</strong>: There is no software to given by the customer. Self managed.</li>
                    <li><strong>Outsonar</strong>: There is a software given by the customer that read the distance from a physical sonar connected to Raspberry. Since we haven't a Raspberry we have to adapt the code to a virtual device.</li>
                </ul>
                The docuemt given by the customer specify that the robot cannot walk over the parking area.
            </div>
        </div>
        <div style="margin-top: 1rem;">
            <h3>Use case</h3>
            Use case diagram based on the stories provided by the customer.
            <table style="margin-top: 1rem; width: 100%;">
                <tbody>
                    <tr>
                        <td>
                            <div style="display: flex; flex-direction: column; align-items: center">
                                <img src="./img/UseCase.jpg" style="margin: 1rem;">
                                <span>Use case</span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table>
                <tbody>
                    <tr>
                        <td style="width: 50%">
                            <!-- USER -->
                            <h4>User Actor</h4>
                            <!-- ENTER CAR -->
                            <h5>Enter Car</h5>
                            <span>
                                <p>
                                    <ks>Main Scenario</ks><br/>
                                    In the main scenario the user sends the slotnum previously received to the service.
                                    It waits for a notification from the system that says the indoor-area is free within a certain period of time (ITOCC).
                                    If the indoor-area it's free, user can drive the car to this area and leave it. Pressing the ENTER CAR button, the system
                                    check the real presence of the car using the weight sensor and emit a unique token to pick-up the car from the outdoor-area.
                                    The trolley moves the car from the indoor area to the selected parking-slot.
                                    <br/><ks>Alternative Sceneries</ks><br/>
                                    There are four alternative sceneries.
                                    <ol>
                                        <li>
                                            In the first one the user doesn't move the car into the indoor area whitin a certain period of time. So the user loses the right to park the car and receive a notification. System release the parking slot.
                                        </li>
                                        <li>
                                            In the second one the user enters the car into the indoor-area but doesn't press the ENTER CAR button in a certain period of time. User receive the unique token and the trolley parks the car.
                                        </li>
                                        <li>
                                            In the third one the user doesn't enter the car inside the indoor-area and press ENTER CAR butto. The systems checks that the area is empty and sends a notification to the user saying the car must be inside the indoor-area.
                                        </li>
                                        <li>
                                            In the fourth scenario, the indoor-area is already engaged the system asks the client for waiting. When the area is free, system sends a notification to the client for entering the car. Continue from main scenario.
                                        </li>
                                    </ol>
                                </p>
                            </span>
                            <!-- PICK-UP CAR -->
                            <h5>Pick-up Car</h5>
                            <span>
                                <p>
                                    <ks>Main Scenario</ks><br/>
                                    The client can pick-up the car from the outdoor-area in a fixed period of time (DTFREE).
                                    <br/><ks>Alternative Scenario</ks><br/>
                                    The client doesn't pick-up the car in a fixed period of time, a notification is sent to the manager that provide to free the area. A notification is sent to the user.
                                </p>
                            </span>
                            <!-- NOTIFY INTEREST-->
                            <h5>Notify Interest</h5>
                            <span>
                                <p>
                                    <ks>Main Scenario</ks><br/>
                                    The user notify the system the interest of entering his car inside parking area adding some useful information to the request. User receive a message containing the slotnum that is not null and higer than zero and represent a cell inside the parking area.
                                    <br/><ks>Alternative Scenario</ks><br/>
                                    The slotnum is zero meaning the parking area is full and the user cannot enter his car.
                                </p>
                            </span>
                            <!-- SUBMIT TOKEN -->
                            <h5>Submit Token</h5>
                            <span>
                                <p>
                                    <ks>Main Scenario</ks><br/>
                                    System check the existance of token given by the user and get the relative slotnum. The system also check the outdoor-area is free and notify the user to wait his car at the outdoor-area. The trolley moves the car from parking slot to outdoor-area and notify the user to pick-up his car. 
                                    <br/><ks>Alternative Sceneries</ks><br/>
                                    There are two alternative sceneries:
                                    <ol>
                                        <li>
                                            In the first one the token entered by the user doesn't exists. System asks for a valid token.
                                        </li>
                                        <li>
                                            In the second scenario the outdoor is occupied by another car. The system notify the user to wait. When outdoot is free continue from main scenario.
                                        </li>
                                    </ol>
                                </p>
                            </span>
                        </td>
                        <!-- MANAGER -->
                        <td>
                            <h4>Manager Actor</h4>
                            <!-- TROLLEY -->
                            <h5>Start Trolley</h5>
                            <p>
                                <ks>Main Scenario</ks><br/>
                                The trolley is managed by the customer, it is resumed to continue to serve the current request or to start a new one or go back to home position.
                            </p>
                            <h5>Stop Trolley</h5>
                            <p>
                                <ks>Main Scenario</ks><br/>
                                The trolley is stopped by the manager.
                            </p>
                            <!-- FAN -->
                            <h5>Start Fan</h5>
                            <p>
                                <ks>Main Scenario</ks><br/>
                                The fan can be started by the manager to decrease the temperature inside the parking area. This use case can be automated.
                            </p>
                            <h5>Stop Fan</h5>
                            <p>
                                <ks>Main Scenario</ks><br/>
                                The manager stop the fan.
                            </p>
                            <!-- OBSERVE STATE -->
                            <h5>Observe State</h5>
                            <p>
                                <ks>Main Scenario</ks><br/>
                                The current system's status is shown to the manager.
                            </p>
                            <!-- IDENTIFICATION -->
                            <h5>Identification</h5>
                            <p>
                                <ks>Main Scenario</ks><br/>
                                The manager enter the credential to access the system. If the credentials are correct the system redirect manager to the home page.
                                <br/><ks>Alternative Scenario</ks><br/>
                                The credential aren't correct, the system notify it and shows the login screen again.
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div style="margin-top: 1rem;">
            <h3>Trolley Tasks</h3>
            Based on use case and possible sceneries we can define six main tasks performed by the trolley.
            <table>
                <tbody>
                    <tr>
                        <td style="width: 50%">
                           <h5>Move to indoor-area</h5>
                           <p>
                               <ks>moveToIndoor</ks><br/>
                               It refers to car enter use case and this task is used by the system for moving the trolley to indoor-area in order to pick-up car and park it. The robot can be in all free cells of the parking-map.
                            </p>

                            <h5>Move to slot parking in</h5>
                            <p>
                                <ks>moveToSlotIn</ks><br/>
                                It refers to car enter use case and this task is used by the system for parking a car into a specific parking-slot, starting from the indoor-area.
                            </p>

                            <h5>Move to home</h5>
                            <p>
                                <ks>moveToHome</ks><br/>
                                It refers to car enter use case and submit token use case. This task is used by the system for moving the transport trolley to the home, also after a parking is completed.
                            </p>
                        </td>
                        <td>
                            <h5>Move to outdoor-area</h5>
                            <p>
                                <ks>moveToOutdoor</ks><br/>
                                It refers to car enter use case and this task is used by the system for trasporting a car to the outdoor-area starting from cells aside parking slot.
                            </p>

                            <h5>Move to slot parking out</h5>
                            <p>
                                <ks>moveToSlotOut</ks><br/>
                                It refers to submit token use case and this task is used by the system for picking-up a car in order to transport it to the outdoor-area. The robot can be in all free cells of the parking-map.
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<h2>Problem analysis</h2>
 

<h2>Test plans</h2> 


<h2>Project</h2> 
 
</div>

<h2>Testing</h2> 
 

<h2>Deployment</h2> 

 
<h2>Maintenance</h2> 
 
<!-- USEFUL
<table style="width:100%" border="1">
<tr>
<td style="width:50%">
</td>
<td></td>
</tr>
</table>
-->
	      	
<br/><br/> 	
</div>  

<div style="background-color:rgba(86, 56, 253, 0.9); width:60%;text-align:left;color:white">
By Alessandro Foglia<br/>
Email: alessandro.foglia@studio.unibo.it<br/>
Git Repository: <a href="https://github.com/Leaaaf/ParkManagerService" target="web" style="color: #fff;">ParkManagerService</a>
</div> 
</body>
</html>